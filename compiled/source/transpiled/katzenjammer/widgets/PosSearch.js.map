{
  "version": 3,
  "sources": [
    "C:/Workspace/katzenjammer/source/class/katzenjammer/widgets/PosSearch.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "ui",
    "container",
    "Composite",
    "statics",
    "properties",
    "SearchField",
    "init",
    "CurrentPos",
    "nullable",
    "construct",
    "layout",
    "HBox",
    "setSearchField",
    "form",
    "TextField",
    "add",
    "basic",
    "Label",
    "getSearchField",
    "flex",
    "btnSearch",
    "Button",
    "addListener",
    "searchPos",
    "e",
    "getKeyCode",
    "members",
    "resetCurrentPos",
    "txt",
    "getValue",
    "req",
    "katzenjammer",
    "data",
    "ServiceRequest",
    "SearchAdressRequest",
    "response",
    "getTarget",
    "getResponse",
    "length",
    "pos",
    "lat",
    "lon",
    "setCurrentPos",
    "MapContainer",
    "Instance",
    "createMarker",
    "console",
    "log",
    "send",
    "updateMarker",
    "SearchAdressRevertRequest",
    "setValue",
    "display_name",
    "widgets",
    "PosSearch"
  ],
  "mappings": "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",
  "sourcesContent": [
    "ï»¿/* global katzenjammer */\r\n/**\r\n*\r\n**/\r\nqx.Class.define(\"katzenjammer.widgets.PosSearch\", {\r\n    extend: qx.ui.container.Composite,\r\n\r\n    statics:\r\n    {\r\n    },\r\n\r\n    properties:\r\n    {\r\n        SearchField: { init: null },\r\n        CurrentPos: { init: null, nullable: true }\r\n    },\r\n\r\n    construct: function ()\r\n    {\r\n        var layout = new qx.ui.layout.HBox(3);\r\n        this.base(arguments, layout);\r\n\r\n        this.setSearchField(new qx.ui.form.TextField());\r\n        this.add(new qx.ui.basic.Label(\"Adresse\"));\r\n        this.add(this.getSearchField(), { flex: 1 });\r\n\r\n        var btnSearch = new qx.ui.form.Button(\"Suchen\");\r\n        this.add(btnSearch);\r\n\r\n        btnSearch.addListener(\"execute\", this.searchPos, this);\r\n        this.getSearchField().addListener(\"keyup\", function (e)\r\n        {\r\n            if (e.getKeyCode() !== 13)\r\n                return;\r\n\r\n            this.searchPos();\r\n        }, this);\r\n    },\r\n\r\n    members:\r\n    {\r\n        searchPos: function (e)\r\n        {\r\n            this.resetCurrentPos();\r\n\r\n            var txt = this.getSearchField().getValue();\r\n\r\n            var req = katzenjammer.data.ServiceRequest.SearchAdressRequest(txt);\r\n            req.addListener(\"success\", function (e)\r\n            {\r\n                var response = e.getTarget().getResponse();\r\n                if (response.length === 1)\r\n                {\r\n                    var pos = [response[0].lat, response[0].lon];\r\n                    this.setCurrentPos(pos);\r\n                    katzenjammer.container.MapContainer.Instance.createMarker(pos, this);\r\n                }\r\n                else\r\n                    console.log(\"Not Found\");\r\n            }, this);\r\n\r\n            req.send();\r\n        },\r\n\r\n        updateMarker: function (pos)\r\n        {\r\n            var req = katzenjammer.data.ServiceRequest.SearchAdressRevertRequest(pos);\r\n\r\n            req.addListener(\"success\", function (e)\r\n            {\r\n                var response = e.getTarget().getResponse();\r\n                this.setCurrentPos([response.lat, response.lon]);\r\n                this.getSearchField().setValue(response.display_name);\r\n            }, this);\r\n\r\n            req.send();\r\n\t\t}\r\n    }\r\n});\r\n"
  ]
}