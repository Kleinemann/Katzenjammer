{
  "version": 3,
  "sources": [
    "C:/Workspace/katzenjammer/source/class/katzenjammer/container/LoginContainer.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "ui",
    "container",
    "Composite",
    "statics",
    "properties",
    "TextUserName",
    "init",
    "LabelWrongUser",
    "SubmitButton",
    "AutoLogin",
    "TextPassword",
    "LabelWrongPassword",
    "construct",
    "layout",
    "VBox",
    "initLoginForm",
    "members",
    "add",
    "basic",
    "Label",
    "setLabelWrongUser",
    "set",
    "textColor",
    "visibility",
    "getLabelWrongUser",
    "setTextUserName",
    "form",
    "TextField",
    "getTextUserName",
    "setLabelWrongPassword",
    "getLabelWrongPassword",
    "setTextPassword",
    "PasswordField",
    "getTextPassword",
    "autoLogin",
    "CheckBox",
    "setAutoLogin",
    "addListener",
    "e",
    "getKeyCode",
    "getSubmitButton",
    "execute",
    "btnSubmit",
    "Button",
    "setSubmitButton",
    "login",
    "getValue",
    "loginUser",
    "bom",
    "Cookie",
    "get",
    "loginPassword",
    "getAutoLogin",
    "setValue",
    "lblRegister",
    "setAppearance",
    "katzenjammer",
    "MainContainer",
    "Instance",
    "switchWindow",
    "user",
    "password",
    "passwordMd5",
    "data",
    "ToolBox",
    "createPassword",
    "Action",
    "Data",
    "req",
    "ServiceRequest",
    "response",
    "getTarget",
    "getResponse",
    "success",
    "del",
    "loadingUser",
    "error",
    "setVisibility",
    "id",
    "send",
    "LoginContainer"
  ],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;AAAAA,EAAAA,EAAE,CAACC,SAAH,CAAaC,oBAAb,CAAkCC,aAAlC;;AAAC;;AACD;AACA;AACA;AACAH,EAAAA,EAAE,CAACI,KAAH,CAASC,MAAT,CAAgB,uCAAhB,EAAyD;AACrDC,IAAAA,MAAM,EAAEN,EAAE,CAACO,EAAH,CAAMC,SAAN,CAAgBC,SAD6B;AAGrDC,IAAAA,OAAO,EACP,EAJqD;AAOrDC,IAAAA,UAAU,EACV;AACIC,MAAAA,YAAY,EAAE;AAAEC,QAAAA,IAAI,EAAE;AAAR,OADlB;AAEIC,MAAAA,cAAc,EAAE;AAAED,QAAAA,IAAI,EAAE;AAAR,OAFpB;AAGIE,MAAAA,YAAY,EAAE;AAAEF,QAAAA,IAAI,EAAE;AAAR,OAHlB;AAKIG,MAAAA,SAAS,EAAE;AAAEH,QAAAA,IAAI,EAAE;AAAR,OALf;AAMII,MAAAA,YAAY,EAAE;AAAEJ,QAAAA,IAAI,EAAE;AAAR,OANlB;AAOIK,MAAAA,kBAAkB,EAAE;AAAEL,QAAAA,IAAI,EAAE;AAAR;AAPxB,KARqD;AAkBrDM,IAAAA,SAAS,EAAE,qBACX;AACI,UAAIC,MAAM,GAAG,IAAIpB,EAAE,CAACO,EAAH,CAAMa,MAAN,CAAaC,IAAjB,CAAsB,CAAtB,CAAb;AACA,uDAAqBD,MAArB;AAEA,WAAKE,aAAL;AACH,KAxBoD;AA0BrDC,IAAAA,OAAO,EACP;AACID,MAAAA,aAAa,EAAE,yBACf;AACI,aAAKE,GAAL,CAAS,IAAIxB,EAAE,CAACO,EAAH,CAAMkB,KAAN,CAAYC,KAAhB,CAAsB,cAAtB,CAAT;AAEA,aAAKC,iBAAL,CAAuB,IAAI3B,EAAE,CAACO,EAAH,CAAMkB,KAAN,CAAYC,KAAhB,CAAsB,yBAAtB,EAAiDE,GAAjD,CACnB;AACIC,UAAAA,SAAS,EAAE,KADf;AAEIC,UAAAA,UAAU,EAAE;AAFhB,SADmB,CAAvB;AAKA,aAAKN,GAAL,CAAS,KAAKO,iBAAL,EAAT;AAEA,aAAKC,eAAL,CAAqB,IAAIhC,EAAE,CAACO,EAAH,CAAM0B,IAAN,CAAWC,SAAf,EAArB;AACA,aAAKV,GAAL,CAAS,KAAKW,eAAL,EAAT;AAGA,aAAKX,GAAL,CAAS,IAAIxB,EAAE,CAACO,EAAH,CAAMkB,KAAN,CAAYC,KAAhB,CAAsB,UAAtB,CAAT;AACA,aAAKU,qBAAL,CAA2B,IAAIpC,EAAE,CAACO,EAAH,CAAMkB,KAAN,CAAYC,KAAhB,CAAsB,sBAAtB,EAA8CE,GAA9C,CACvB;AACIC,UAAAA,SAAS,EAAE,KADf;AAEIC,UAAAA,UAAU,EAAE;AAFhB,SADuB,CAA3B;AAKA,aAAKN,GAAL,CAAS,KAAKa,qBAAL,EAAT;AAEA,aAAKC,eAAL,CAAqB,IAAItC,EAAE,CAACO,EAAH,CAAM0B,IAAN,CAAWM,aAAf,EAArB;AACA,aAAKf,GAAL,CAAS,KAAKgB,eAAL,EAAT;AAGA,YAAIC,SAAS,GAAG,IAAIzC,EAAE,CAACO,EAAH,CAAM0B,IAAN,CAAWS,QAAf,CAAwB,oBAAxB,CAAhB;AACA,aAAKC,YAAL,CAAkBF,SAAlB;AACA,aAAKjB,GAAL,CAASiB,SAAT;AAGA,aAAKD,eAAL,GAAuBI,WAAvB,CAAmC,OAAnC,EAA4C,UAAUC,CAAV,EAC5C;AACI,cAAIA,CAAC,CAACC,UAAF,OAAmB,EAAvB,EACI,KAAKC,eAAL,GAAuBC,OAAvB;AACP,SAJD,EAIG,IAJH;AAKA,aAAKb,eAAL,GAAuBS,WAAvB,CAAmC,OAAnC,EAA4C,UAAUC,CAAV,EAC5C;AACI,cAAIA,CAAC,CAACC,UAAF,OAAmB,EAAvB,EACI,KAAKC,eAAL,GAAuBC,OAAvB;AACP,SAJD,EAIG,IAJH;AAMA,YAAIC,SAAS,GAAG,IAAIjD,EAAE,CAACO,EAAH,CAAM0B,IAAN,CAAWiB,MAAf,CAAsB,OAAtB,CAAhB;AACA,aAAKC,eAAL,CAAqBF,SAArB;AACAA,QAAAA,SAAS,CAACL,WAAV,CAAsB,SAAtB,EAAiC,UAAUC,CAAV,EACjC;AACI,eAAKO,KAAL,CAAW,KAAKjB,eAAL,GAAuBkB,QAAvB,EAAX,EAA8C,KAAKb,eAAL,GAAuBa,QAAvB,EAA9C;AACH,SAHD,EAGG,IAHH;AAIA,aAAK7B,GAAL,CAASyB,SAAT;AAEA,YAAIK,SAAS,GAAGtD,EAAE,CAACuD,GAAH,CAAOC,MAAP,CAAcC,GAAd,CAAkB,MAAlB,CAAhB;AACA,YAAIC,aAAa,GAAG1D,EAAE,CAACuD,GAAH,CAAOC,MAAP,CAAcC,GAAd,CAAkB,UAAlB,CAApB;;AAEA,YAAIH,SAAS,KAAK,IAAd,IAAsBI,aAAa,KAAK,IAA5C,EACA;AACI,eAAKC,YAAL,GAAoBC,QAApB,CAA6B,IAA7B;AACA,eAAKzB,eAAL,GAAuByB,QAAvB,CAAgCN,SAAhC;AACA,eAAKd,eAAL,GAAuBoB,QAAvB,CAAgCF,aAAhC;AACA,eAAKN,KAAL,CAAW,KAAKjB,eAAL,GAAuBkB,QAAvB,EAAX,EAA8C,KAAKb,eAAL,GAAuBa,QAAvB,EAA9C;AACH;;AAGD,YAAIQ,WAAW,GAAG,IAAI7D,EAAE,CAACO,EAAH,CAAM0B,IAAN,CAAWiB,MAAf,CAAsB,UAAtB,CAAlB;AACAW,QAAAA,WAAW,CAACC,aAAZ,CAA0B,MAA1B;AACA,aAAKtC,GAAL,CAASqC,WAAT;AACAA,QAAAA,WAAW,CAACjB,WAAZ,CAAwB,OAAxB,EAAiC,UAAUC,CAAV,EACjC;AACIkB,UAAAA,YAAY,CAACvD,SAAb,CAAuBwD,aAAvB,CAAqCC,QAArC,CAA8CC,YAA9C,CAA2D,OAA3D,EAAoE,UAApE;AACH,SAHD,EAGG,IAHH;AAIH,OAvEL;AA0EId,MAAAA,KAAK,EAAE,eAAUe,IAAV,EAAgBC,QAAhB,EACP;AACI,YAAIC,WAAW,GAAGN,YAAY,CAACO,IAAb,CAAkBC,OAAlB,CAA0BC,cAA1B,CAAyCJ,QAAzC,CAAlB;AACA,YAAIE,IAAI,GAAG;AACPG,UAAAA,MAAM,EAAE,OADD;AAEPC,UAAAA,IAAI,EAAE;AACF,oBAAQP,IADN;AAEF,wBAAYE;AAFV;AAFC,SAAX;AAQA,YAAIM,GAAG,GAAG,IAAIZ,YAAY,CAACO,IAAb,CAAkBM,cAAtB,CAAqCN,IAArC,CAAV;AACAK,QAAAA,GAAG,CAAC/B,WAAJ,CAAgB,SAAhB,EAA2B,UAAUC,CAAV,EAC3B;AACI,cAAIgC,QAAQ,GAAGhC,CAAC,CAACiC,SAAF,GAAcC,WAAd,EAAf,CADJ,CAEI;;AAEA,cAAIF,QAAQ,CAACG,OAAb,EACA;AACI,gBAAI,KAAKrB,YAAL,GAAoBN,QAApB,EAAJ,EACA;AACIrD,cAAAA,EAAE,CAACuD,GAAH,CAAOC,MAAP,CAAc5B,GAAd,CAAkB,MAAlB,EAA0BuC,IAA1B,EAAgC,CAAhC,EAAmC,OAAnC;AACAnE,cAAAA,EAAE,CAACuD,GAAH,CAAOC,MAAP,CAAc5B,GAAd,CAAkB,UAAlB,EAA8BwC,QAA9B,EAAwC,CAAxC,EAA2C,OAA3C;AACH,aAJD,MAMA;AACIpE,cAAAA,EAAE,CAACuD,GAAH,CAAOC,MAAP,CAAcyB,GAAd,CAAkB,MAAlB,EAA0B,OAA1B;AACAjF,cAAAA,EAAE,CAACuD,GAAH,CAAOC,MAAP,CAAcyB,GAAd,CAAkB,UAAlB,EAA8B,OAA9B;AAClB;;AACclB,YAAAA,YAAY,CAACvD,SAAb,CAAuBwD,aAAvB,CAAqCC,QAArC,CAA8CiB,WAA9C,CAA0DL,QAAQ,CAACP,IAAnE;AACH,WAbD,MAeA;AACI,gBAAIa,KAAK,GAAGN,QAAQ,CAACM,KAAT,CAAe,CAAf,CAAZ;AACA,iBAAKpD,iBAAL,GAAyBqD,aAAzB,CAAuCD,KAAK,CAACE,EAAN,KAAa,EAAb,GAAkB,SAAlB,GAA6B,UAApE;AACA,iBAAKhD,qBAAL,GAA6B+C,aAA7B,CAA2CD,KAAK,CAACE,EAAN,KAAa,EAAb,GAAkB,SAAlB,GAA6B,UAAxE;AACf;AACQ,SAzBD,EAyBG,IAzBH;AA2BAV,QAAAA,GAAG,CAACW,IAAJ;AACT;AAlHC;AA3BqD,GAAzD;AAJAvB,EAAAA,YAAY,CAACvD,SAAb,CAAuB+E,cAAvB,CAAsCpF,aAAtC,GAAsDA,aAAtD",
  "sourcesContent": [
    "ï»¿/* global katzenjammer */\r\n/**\r\n*\r\n**/\r\nqx.Class.define(\"katzenjammer.container.LoginContainer\", {\r\n    extend: qx.ui.container.Composite,\r\n\r\n    statics:\r\n    {        \r\n    },\r\n\r\n    properties:\r\n    {\r\n        TextUserName: { init: null },\r\n        LabelWrongUser: { init: null },\r\n        SubmitButton: { init: null },\r\n\r\n        AutoLogin: { init: null },\r\n        TextPassword: { init: null },\r\n        LabelWrongPassword: { init: null }\r\n    },\r\n\r\n    construct: function ()\r\n    {\r\n        var layout = new qx.ui.layout.VBox(3);\r\n        this.base(arguments, layout);\r\n\r\n        this.initLoginForm();\r\n    },\r\n\r\n    members:\r\n    {\r\n        initLoginForm: function ()\r\n        {\r\n            this.add(new qx.ui.basic.Label(\"Benutzername\"));\r\n\r\n            this.setLabelWrongUser(new qx.ui.basic.Label(\"Benutzer ist unbekannt.\").set(\r\n                {\r\n                    textColor: \"red\",\r\n                    visibility: \"excluded\"\r\n                }));\r\n            this.add(this.getLabelWrongUser());\r\n\r\n            this.setTextUserName(new qx.ui.form.TextField());\r\n            this.add(this.getTextUserName());\r\n\r\n\r\n            this.add(new qx.ui.basic.Label(\"Passwort\"));\r\n            this.setLabelWrongPassword(new qx.ui.basic.Label(\"Passwort ist falsch.\").set(\r\n                {\r\n                    textColor: \"red\",\r\n                    visibility: \"excluded\"\r\n                }));\r\n            this.add(this.getLabelWrongPassword());\r\n\r\n            this.setTextPassword(new qx.ui.form.PasswordField());\r\n            this.add(this.getTextPassword());\r\n\r\n\r\n            var autoLogin = new qx.ui.form.CheckBox(\"Angemeldet bleiben\");\r\n            this.setAutoLogin(autoLogin);\r\n            this.add(autoLogin);\r\n\r\n\r\n            this.getTextPassword().addListener(\"keyup\", function (e)\r\n            {\r\n                if (e.getKeyCode() === 13)\r\n                    this.getSubmitButton().execute();\r\n            }, this);\r\n            this.getTextUserName().addListener(\"keyup\", function (e)\r\n            {\r\n                if (e.getKeyCode() === 13)\r\n                    this.getSubmitButton().execute();\r\n            }, this);\r\n\r\n            var btnSubmit = new qx.ui.form.Button(\"Login\");\r\n            this.setSubmitButton(btnSubmit);\r\n            btnSubmit.addListener(\"execute\", function (e)\r\n            {\r\n                this.login(this.getTextUserName().getValue(), this.getTextPassword().getValue());\r\n            }, this);\r\n            this.add(btnSubmit);\r\n\r\n            var loginUser = qx.bom.Cookie.get(\"User\");\r\n            var loginPassword = qx.bom.Cookie.get(\"Password\");\r\n\r\n            if (loginUser !== null && loginPassword !== null)\r\n            {\r\n                this.getAutoLogin().setValue(true);\r\n                this.getTextUserName().setValue(loginUser)\r\n                this.getTextPassword().setValue(loginPassword);\r\n                this.login(this.getTextUserName().getValue(), this.getTextPassword().getValue());\r\n            }\r\n\r\n\r\n            var lblRegister = new qx.ui.form.Button(\"Register\");\r\n            lblRegister.setAppearance(\"Link\");\r\n            this.add(lblRegister);\r\n            lblRegister.addListener(\"click\", function (e)\r\n            {\r\n                katzenjammer.container.MainContainer.Instance.switchWindow(\"Login\", \"Register\");\r\n            }, this);\r\n        },\r\n\r\n\r\n        login: function (user, password)\r\n        {\r\n            var passwordMd5 = katzenjammer.data.ToolBox.createPassword(password);\r\n            var data = {\r\n                Action: \"login\",\r\n                Data: {\r\n                    \"User\": user,\r\n                    \"Password\": passwordMd5\r\n                }\r\n            };\r\n\r\n            var req = new katzenjammer.data.ServiceRequest(data);\r\n            req.addListener(\"success\", function (e)\r\n            {\r\n                var response = e.getTarget().getResponse();\r\n                //console.log(response);\r\n\r\n                if (response.success)\r\n                {\r\n                    if (this.getAutoLogin().getValue())\r\n                    {\r\n                        qx.bom.Cookie.set(\"User\", user, 7, \"Login\");\r\n                        qx.bom.Cookie.set(\"Password\", password, 7, \"Login\");\r\n                    }\r\n                    else\r\n                    {\r\n                        qx.bom.Cookie.del(\"User\", \"Login\");\r\n                        qx.bom.Cookie.del(\"Password\", \"Login\");\r\n\t\t\t\t\t}\r\n                    katzenjammer.container.MainContainer.Instance.loadingUser(response.data);\r\n                }\r\n                else\r\n                {\r\n                    var error = response.error[0];\r\n                    this.getLabelWrongUser().setVisibility(error.id === 21 ? \"visible\": \"excluded\");\r\n                    this.getLabelWrongPassword().setVisibility(error.id === 22 ? \"visible\": \"excluded\");\r\n\t\t\t\t}\r\n            }, this);\r\n\r\n            req.send();\r\n\t\t}\r\n    }\r\n});\r\n"
  ]
}