{
  "version": 3,
  "sources": [
    "C:/Workspace/katzenjammer/source/class/katzenjammer/container/RegisterContainer.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "ui",
    "container",
    "Composite",
    "statics",
    "properties",
    "TextEmail",
    "init",
    "TextUserName",
    "LabelWrongEmail",
    "LabelWrongUser",
    "SubmitButton",
    "TextPassword",
    "LabelWrongPassword",
    "TextPassword2",
    "LabelWrongPassword2",
    "construct",
    "layout",
    "VBox",
    "initRegisterForm",
    "members",
    "add",
    "basic",
    "Label",
    "setLabelWrongEmail",
    "set",
    "textColor",
    "visibility",
    "getLabelWrongEmail",
    "setTextEmail",
    "form",
    "TextField",
    "getTextEmail",
    "setLabelWrongUser",
    "getLabelWrongUser",
    "setTextUserName",
    "getTextUserName",
    "setLabelWrongPassword",
    "getLabelWrongPassword",
    "setTextPassword",
    "PasswordField",
    "getTextPassword",
    "setLabelWrongPassword2",
    "getLabelWrongPassword2",
    "setTextPassword2",
    "getTextPassword2",
    "btnSubmit",
    "Button",
    "setSubmitButton",
    "addListener",
    "e",
    "checkRegisterData",
    "registerUser",
    "getValue",
    "value",
    "alert",
    "length",
    "setVisibility",
    "email",
    "user",
    "password",
    "katzenjammer",
    "data",
    "ToolBox",
    "createPassword",
    "Action",
    "Data",
    "Email",
    "User",
    "Password",
    "req",
    "ServiceRequest",
    "response",
    "getTarget",
    "getResponse",
    "success",
    "MainContainer",
    "Instance",
    "switchWindow",
    "i",
    "error",
    "id",
    "send",
    "RegisterContainer"
  ],
  "mappings": "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",
  "sourcesContent": [
    "﻿/* global katzenjammer */\r\n/**\r\n*\r\n**/\r\nqx.Class.define(\"katzenjammer.container.RegisterContainer\", {\r\n    extend: qx.ui.container.Composite,\r\n\r\n    statics:\r\n    {\r\n    },\r\n\r\n    properties:\r\n    {\r\n        TextEmail: { init: null },\r\n        TextUserName: { init: null },\r\n        LabelWrongEmail: { init: null },\r\n        LabelWrongUser: { init: null },\r\n        SubmitButton: { init: null },\r\n        TextPassword: { init: null },\r\n        LabelWrongPassword: { init: null },\r\n        TextPassword2: { init: null },\r\n        LabelWrongPassword2: { init: null }\r\n    },\r\n\r\n    construct: function ()\r\n    {\r\n        var layout = new qx.ui.layout.VBox(3);\r\n        this.base(arguments, layout);\r\n\r\n        this.initRegisterForm();\r\n    },\r\n\r\n    members:\r\n    {\r\n        initRegisterForm: function ()\r\n        {\r\n            this.add(new qx.ui.basic.Label(\"E-Mail\"));\r\n\r\n            this.setLabelWrongEmail(new qx.ui.basic.Label(\"E-Mail wird schon benutzt.\").set(\r\n                {\r\n                    textColor: \"red\",\r\n                    visibility: \"excluded\"\r\n                }));\r\n            this.add(this.getLabelWrongEmail());\r\n\r\n            this.setTextEmail(new qx.ui.form.TextField());\r\n            this.add(this.getTextEmail());\r\n\r\n            this.add(new qx.ui.basic.Label(\"Benutzername\"));\r\n\r\n            this.setLabelWrongUser(new qx.ui.basic.Label(\"Benutzer ist unbekannt.\").set(\r\n                {\r\n                    textColor: \"red\",\r\n                    visibility: \"excluded\"\r\n                }));\r\n            this.add(this.getLabelWrongUser());\r\n\r\n            this.setTextUserName(new qx.ui.form.TextField());\r\n            this.add(this.getTextUserName());\r\n\r\n\r\n            this.add(new qx.ui.basic.Label(\"Passwort (Mindestens 8 Zeichen)\"));\r\n            this.setLabelWrongPassword(new qx.ui.basic.Label(\"Passwort ist nicht sicher.\").set(\r\n                {\r\n                    textColor: \"red\",\r\n                    visibility: \"excluded\"\r\n                }));\r\n            this.add(this.getLabelWrongPassword());\r\n\r\n            this.setTextPassword(new qx.ui.form.PasswordField());\r\n            this.add(this.getTextPassword());\r\n\r\n\r\n            this.add(new qx.ui.basic.Label(\"Passwort widerholen\"));\r\n            this.setLabelWrongPassword2(new qx.ui.basic.Label(\"Passwort ist falsch.\").set(\r\n                {\r\n                    textColor: \"red\",\r\n                    visibility: \"excluded\"\r\n                }));\r\n            this.add(this.getLabelWrongPassword2());\r\n\r\n            this.setTextPassword2(new qx.ui.form.PasswordField());\r\n            this.add(this.getTextPassword2());\r\n\r\n\r\n            var btnSubmit = new qx.ui.form.Button(\"Registrieren\");\r\n            this.setSubmitButton(btnSubmit);\r\n            btnSubmit.addListener(\"execute\", function (e)\r\n            {\r\n                if (this.checkRegisterData())\r\n                    this.registerUser(this.getTextEmail().getValue(), this.getTextUserName().getValue(), this.getTextPassword().getValue());\r\n            }, this);\r\n            this.add(btnSubmit);        \r\n        },\r\n\r\n\r\n\r\n        checkRegisterData: function ()\r\n        {\r\n            var value = this.getTextEmail().getValue();\r\n            if (this.getTextEmail().getValue() === null || this.getTextEmail().getValue() === \"\"\r\n                || this.getTextUserName().getValue() === null || this.getTextUserName().getValue() === \"\"\r\n                || this.getTextPassword().getValue() === null || this.getTextPassword().getValue() === \"\"\r\n                || this.getTextPassword2().getValue() === null || this.getTextPassword2().getValue() === \"\")\r\n            {\r\n                alert(\"Bitte alle Felder ausfüllen\");\r\n                return false;\r\n            }\r\n\r\n            if (this.getTextPassword().getValue().length < 8)\r\n            {\r\n                this.getLabelWrongPassword().setVisibility(\"visible\");\r\n                return false;\r\n            }\r\n            else\r\n                this.getLabelWrongPassword().setVisibility(\"excluded\");\r\n                \r\n            \r\n            if (this.getTextPassword().getValue() !== this.getTextPassword2().getValue())\r\n            {\r\n                this.getLabelWrongPassword2().setVisibility(\"visible\");\r\n                return false;\r\n            }\r\n            else\r\n                this.getLabelWrongPassword2().setVisibility(\"excluded\");\r\n\r\n            return true;\r\n\t\t},\r\n\r\n\r\n        registerUser: function (email, user, password)\r\n        {\r\n            password = katzenjammer.data.ToolBox.createPassword(password);\r\n            var data = {\r\n                Action: \"register\",\r\n                Data: {\r\n                    Email: email,\r\n                    User: user,\r\n                    Password: password\r\n                }\r\n            };\r\n\r\n            var req = new katzenjammer.data.ServiceRequest(data);\r\n            req.addListener(\"success\", function (e)\r\n            {\r\n                var response = e.getTarget().getResponse();\r\n                //console.log(response);\r\n                this.getLabelWrongUser().setVisibility(\"excluded\");\r\n                this.getLabelWrongEmail().setVisibility(\"excluded\");\r\n\r\n                if (response.success)\r\n                {\r\n                    alert(\"Sie wurden erfolgreich registriert\");\r\n                    katzenjammer.container.MainContainer.Instance.switchWindow(\"Register\", \"Login\");\r\n                }\r\n                else\r\n                {\r\n                    for (var i in response.error)\r\n                    {\r\n                        var error = response.error[i];\r\n                        if (error.id === 32) this.getLabelWrongUser().setVisibility(\"visible\");\r\n                        if (error.id === 31) this.getLabelWrongEmail().setVisibility(\"visible\");\r\n                    }\r\n                }\r\n            }, this);\r\n\r\n            req.send();\r\n        }\r\n    }\r\n});\r\n"
  ]
}